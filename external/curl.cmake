if(APPLE)
	find_library(curl_LIBRARIES curl REQUIRED)
	add_library(libcurl INTERFACE)
	target_link_libraries(libcurl INTERFACE ${curl_LIBRARIES})
else()
	set(HTTP_ONLY ON)
	set(CURL_USE_LIBSSH2 OFF)
	set(PICKY_COMPILER OFF)
	set(BUILD_CURL_EXE OFF)
	set(BUILD_SHARED_LIBS ON)
	set(BUILD_LIBCURL_DOCS OFF)
	set(ENABLE_CURL_MANUAL OFF)
	set(CURL_USE_LIBPSL OFF) # Not included in Steam Runtime SDK.

	if(WIN32)
		set(CURL_USE_SCHANNEL ON)
	endif()

	add_subdirectory("curl" EXCLUDE_FROM_ALL)
	install(FILES "${CMAKE_CURRENT_SOURCE_DIR}/curl/COPYING" TYPE BIN COMPONENT launcher/executables RENAME "LICENSE.curl.txt")

	if(CURL_USE_OPENSSL)
		find_library(ssl_libraries ssl)
		find_library(crypto_libraries crypto)
		install_as_soname(launcher/executables ${ssl_libraries})
		install_as_soname(launcher/executables ${crypto_libraries})

		if(EXISTS "/usr/share/doc/libssl-dev/copyright")
			install_no_symlink(launcher/executables "/usr/share/doc/libssl-dev/copyright" "LICENSE.openssl.txt")
		elseif(EXISTS "/usr/share/licenses/openssl/LICENSE.txt")
			install_no_symlink(launcher/executables "/usr/share/licenses/openssl/LICENSE.txt" "LICENSE.openssl.txt")
		endif()
	endif()
endif()
